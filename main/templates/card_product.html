{% load static %}
<div class="card shadow-sm border-0 rounded-3 h-100">
  <!-- Thumbnail -->
  {% if product.thumbnail %}
    <div style="width: 100%; height: 300px; background-color: white; display: flex; justify-content: center; align-items: center; overflow: hidden;">
    <img src="{{ product.thumbnail }}" alt="{{ product.name }}"
         style="max-width: 100%; max-height: 100%; object-fit: contain; display: block;">
</div>
  {% else %}
    <div class="bg-light d-flex align-items-center justify-content-center" style="aspect-ratio: 16/9;">
      <span class="text-muted">No image</span>
    </div>
  {% endif %}

  <div class="card-body d-flex flex-column">
    <!-- Badges -->
    <div class="d-flex justify-content-between mb-2">
      <span class="badge bg-darkblue">{{ product.get_category_display }}</span>
      <div class="d-flex gap-1">
        {% if product.is_featured %}
          <span class="badge bg-warning text-dark">Featured</span>
        {% endif %}
        {% if product.is_item_hot %}
          <span class="badge bg-danger">Hot</span>
        {% endif %}
      </div>
    </div>

    <!-- Meta (date & views) -->
    <div class="text-muted small mb-2">
      <time datetime="{{ product.release_year|date:'c' }}">{{ product.release_year|date:"M j, Y" }}</time>
      • {{ product.item_views }} views
    </div>

    <!-- Title -->
    <h5 class="card-title mb-2">
      <a href="{% url 'main:show_product' product.id %}" class="text-dark text-decoration-none hover-darkblue">
        {{ product.name }}
      </a>
    </h5>
    <p class="mb-3 ">{{ product.price }} €</p>

    <!-- Description
    <p class="card-text text-muted small mb-3">
      {{ product.description|truncatewords:20 }}
    </p> -->

    <!-- Footer Actions -->
    {% if user.is_authenticated and product.user == user %}
      <div class="d-flex justify-content-between border-top pt-2 mt-auto">
        <a href="{% url 'main:show_product' product.id %}" class="text-darkblue fw-medium small text-decoration-none">
          View more details →
        </a>
        <div class="d-flex gap-2">
          <a href="{% url 'main:edit_product' product.id %}" class="text-muted small text-decoration-none">Edit</a>
          <a href="{% url 'main:delete_product' product.id %}" class="text-danger small text-decoration-none">Delete</a>
        </div>
      </div>
    {% else %}
      <div class="border-top pt-2 mt-auto">
        <a href="{% url 'main:show_product' product.id %}" class="text-darkblue fw-medium small text-decoration-none">
          View more details →
        </a>
      </div>
    {% endif %}
  </div>
</div>
